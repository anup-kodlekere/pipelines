name: Periodic Functional Tests

on: [ push, workflow_dispatch ]

jobs:
  run_tests:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Execute SSH commmands on remote server VCM
        run: |

          mkdir -p /home/runner/.ssh/
          echo "${{ secrets.SSH_KEY }}" > /home/runner/.ssh/github_actions
          chmod 0600 /home/runner/.ssh/github_actions
      #     ssh -vvv -i /home/runner/.ssh/github_actions -o KexAlgorithms=ecdh-sha2-nistp521 -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no root@130.198.121.194 '/root/k8s-ansible-automation/create-cluster.sh'
      - name: Execute SSH commands on ubuntu server
        run: |
          sudo mkdir -p /root/.kube
          scp -i /home/runner/.ssh/github_actions -o MACs=hmac-sha2-256 -o StrictHostKeyChecking=no -o LogLevel=ERROR -o UserKnownHostsFile=/dev/null root@130.198.121.194:/root/.kube/config /root/.kube
          kubectl get pods 